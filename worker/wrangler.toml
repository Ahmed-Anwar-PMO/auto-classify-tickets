name = "zendesk-ticket-classifier"
main = "src/index.js"
compatibility_date = "2024-01-01"

# Routes: apex + subdomains for myaleena.com (zone_id from Cloudflare Dashboard)
[[routes]]
pattern = "myaleena.com/*"
zone_id = "e61e1e99902f88e8a21ecb3419e23465"

[[routes]]
pattern = "*.myaleena.com/*"
zone_id = "e61e1e99902f88e8a21ecb3419e23465"

[vars]
IMAGE_MATCHER_URL = "https://image-matcher-whm0.onrender.com"
# Set via wrangler secret or dashboard:
# ZENDESK_SUBDOMAIN, ZENDESK_EMAIL, ZENDESK_API_TOKEN
# REASON_FIELD_ID (custom field ID for "Reason for contact")
# SUPABASE_URL, SUPABASE_SERVICE_KEY (for audit logging)

# Secrets: wrangler secret put ZENDESK_API_TOKEN
#          wrangler secret put SUPABASE_SERVICE_KEY
